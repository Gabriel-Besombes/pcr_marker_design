## Test uMelt functionality

## Really need a function to test if umelt service is
## a) working
## b) working as expected

## mocks to allow routine testing, assuming it is working

import pytest
import numpy as np
from pcr_marker_design import umelt_service as um

test_seq="TATAACCTGACTAACCATGAACCTGGGTAGAATTCCACTCCTCCACCAAATTTTTTAACTTAACCAAG"

test_seq_hels=np.array([  9.73479996e+01,   9.72409973e+01,   9.71320038e+01,
         9.70189972e+01,   9.69020004e+01,   9.67819977e+01,
         9.66569977e+01,   9.65270004e+01,   9.63919983e+01,
         9.62490005e+01,   9.60999985e+01,   9.59400024e+01,
         9.57699966e+01,   9.55859985e+01,   9.53860016e+01,
         9.51650009e+01,   9.49189987e+01,   9.46409988e+01,
         9.43229980e+01,   9.39560013e+01,   9.35270004e+01,
         9.30210037e+01,   9.24219971e+01,   9.17080002e+01,
         9.08580017e+01,   8.98499985e+01,   8.86640015e+01,
         8.72799988e+01,   8.56790009e+01,   8.38259964e+01,
         8.16230011e+01,   7.88099976e+01,   7.47559967e+01,
         6.82089996e+01,   5.75139999e+01,   4.24399986e+01,
         2.64400005e+01,   1.41599998e+01,   6.88999987e+00,
         3.20799994e+00,   1.47599995e+00,   6.83000028e-01,
         3.19999993e-01,   1.51999995e-01,   7.40000010e-02,
         3.70000005e-02,   1.89999994e-02,   9.99999978e-03,
         4.99999989e-03,   3.00000003e-03,   2.00000009e-03,
         1.00000005e-03,   1.00000005e-03,   0.00000000e+00,
         0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
         0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
         0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
         0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
         0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
         0.00000000e+00,   0.00000000e+00], dtype=np.float32)

def test_getmelt():
    assert(np.equal(um.getmelt(test_seq),test_seq_hels).all())

if __name__ == '__main__':
        pytest.main()
